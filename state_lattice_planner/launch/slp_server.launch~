<?xml version="1.0"?>

<launch>
    <arg name="hz" default="1.0"/>
    <arg name="robot_frame" default="base"/>
    <arg name="n_p" default="15"/>
    <arg name="n_h" default="5"/>
    <arg name="max_alpha" default="1.5"/>
    <arg name="max_psi" default="1.1"/>
    <arg name="max_acc" default="0.4"/>
    <arg name="n_s" default="1000"/>
    <arg name="target_velocity" default="0.45"/>
    <arg name="lookup_table_file_name" default="$(find state_lattice_planner)/lookup_table/lookup_table_ver2.csv"/>
    <arg name="param_file_name" default="$(find state_lattice_planner)/config/robot_param.yaml"/>
    <arg name="optimization_tolerance" default="0.25"/>
    <arg name="max_iteration" default="5"/>
    <arg name="ignorable_obstacle_range" default="1.0"/>
    <arg name="verbose" default="false"/>
    <arg name="control_delay" default="5"/>
    <arg name="turn_direction_threshold" default="0.65"/>
    <arg name="enable_sharp_trajectory" default="false"/>
    <arg name="localmap_range" default="7.0"/>
    <arg name="subgoal_range" default="1.0"/>
    <arg name="finalgoal_range" default="0.5"/>

    <node pkg="state_lattice_planner" type="slp_server" name="localnavi_server" output="screen">
        <rosparam command="load" file="$(arg param_file_name)"/>
        <param name="HZ" value="$(arg hz)"/>
        <param name="N_P" value="$(arg n_p)"/>
        <param name="N_H" value="$(arg n_h)"/>
        <param name="MAX_ALPHA" value="$(arg max_alpha)"/>
        <param name="MAX_PSI" value="$(arg max_psi)"/>
        <param name="N_S" value="$(arg n_s)"/>
        <param name="MAX_ACCELERATION" value="$(arg max_acc)"/>
        <param name="TARGET_VELOCITY" value="$(arg target_velocity)"/>
        <param name="LOOKUP_TABLE_FILE_NAME" value="$(arg lookup_table_file_name)"/>
        <param name="MAX_ITERATION" value="$(arg max_iteration)"/>
        <param name="OPTIMIZATION_TOLERANCE" value="$(arg optimization_tolerance)"/>
        <param name="IGNORABLE_OBSTACLE_RANGE" value="$(arg ignorable_obstacle_range)"/>
        <param name="VERBOSE" value="$(arg verbose)"/>
        <param name="CONTROL_DELAY" value="$(arg control_delay)"/>
        <param name="TURN_DIRECTION_THRESHOLD" value="$(arg turn_direction_threshold)"/>
        <param name="ENABLE_SHARP_TRAJECTORY" value="$(arg enable_sharp_trajectory)"/>
        <param name="MAP_RANGE" value="$(arg localmap_range)"/>
        <param name="SUBGOAL_RANGE" value="$(arg subgoal_range)"/>
        <param name="GOAL_RANGE" value="$(arg finalgoal_range)"/>
        <remap from="/local_map" to="/costmap_node/costmap/costmap"/>
        <!--<remap from="/local_map" to="/map"/>-->
        <remap from="/local_goal" to="/local_goal"/>
        <remap from="/cmd_vel" to="/cmd_vel"/>
        <remap from="/odom" to="/odom"/>
    </node>
</launch>
